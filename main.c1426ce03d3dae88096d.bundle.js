webpackJsonp([1,4],{151:function(e,t,o){"use strict";var i=o(3),r=o(408);o.n(r);o.d(t,"a",function(){return c});var n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},a={"errors.location.unsupportedBrowser":"Browser does not support location services","errors.location.permissionDenied":"You have rejected access to your location","errors.location.positionUnavailable":"Unable to determine your location","errors.location.timeout":"Service timeout has been reached"},c=function(){function e(){}return e.prototype.getLocation=function(e){return r.Observable.create(function(t){window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(function(e){t.next(e),t.complete()},function(e){switch(e.code){case 1:t.error(a["errors.location.permissionDenied"]);break;case 2:t.error(a["errors.location.positionUnavailable"]);break;case 3:t.error(a["errors.location.timeout"])}},e):t.error(a["errors.location.unsupportedBrowser"])})},e=n([o.i(i.c)()],e)}()},152:function(e,t,o){"use strict";var i=o(70),r=o(3),n=o(145),a=o(0);o.n(a);o.d(t,"a",function(){return u});var c=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t){this.gmapsLoader=e,this.dataService=t}return e.prototype.reverseGeocoder=function(e,t){var o=this;return a.Observable.create(function(i){o.gmapsLoader.load().then(function(){o.geocoder=new google.maps.Geocoder;try{var r=new google.maps.LatLng(e,t);o.geocoder.geocode({latLng:r},function(e,t){i.next(e),i.complete()})}catch(e){i.error("error getGeocoding"+e),i.complete()}})})},e.prototype.isEstado=function(e){return e.types.includes("administrative_area_level_1")&&e.types.includes("political")},e.prototype.getGeocoderAddressUF=function(e){var t,o=this;return e.map(function(e){return e.address_components.filter(function(e,i,r){o.isEstado(e)&&(t=e.short_name)})}),t},e=c([o.i(r.c)(),s("design:paramtypes",["function"==typeof(t=void 0!==n.b&&n.b)&&t||Object,"function"==typeof(u=void 0!==i.a&&i.a)&&u||Object])],e);var t,u}()},153:function(e,t,o){"use strict";var i=o(70),r=o(69),n=o(3),a=o(125),c=(o.n(a),o(124)),s=(o.n(c),o(403));o.n(s);o.d(t,"a",function(){return f});var u=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t){this.http=e,this.dataService=t}return e.prototype.refreshMap=function(e){var t=this;this.dataService.getEstado(e.estado).subscribe(function(o){var i=t.unsetMunicipios(o,e);if(t.map.removeLayer(t.vector),t.map.removeLayer(t.vectorRegiao),t.map.removeInteraction(t.interaction),t.vectorSource=new s.source.Vector({features:(new s.format.TopoJSON).readFeatures(o)}),t.vector=new s.layer.Vector({source:t.vectorSource,style:t.style}),t.map.addLayer(t.vector),i){t.vectorSourceRegiao=new s.source.Vector({features:(new s.format.TopoJSON).readFeatures(i)}),t.vectorRegiao=new s.layer.Vector({source:t.vectorSourceRegiao,style:new s.style.Style({fill:new s.style.Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new s.style.Stroke({color:"#319FD3",width:1})})}),t.map.addLayer(t.vectorRegiao),t.interaction=new s.interaction.Select({condition:s.events.condition.pointerMove,layers:[t.vectorRegiao]}),t.map.addInteraction(t.interaction);var r=t;t.interaction.on("select",function(e){if(e.target.getFeatures().getLength()){var t=e.target.getFeatures().getArray()[0].getProperties().cod;r.dataService.listMunicipios().subscribe(function(e){var o=e.filter(function(e){return e.codigo==t})[0];document.getElementById("title").innerHTML=o.nome})}})}t.view.animate({zoom:8},{center:s.proj.transform(e.latLng,"EPSG:4326","EPSG:4326")})})},e.prototype.createMap=function(){return this.style=new s.style.Style({fill:new s.style.Fill({color:"rgba(255, 255, 255, 0.3)"}),stroke:new s.style.Stroke({color:"#319FD3",width:1})}),this.vectorSource=new s.source.Vector,this.vector=new s.layer.Vector({source:this.vectorSource,style:this.style}),this.view=new s.View({projection:"EPSG:4326",center:s.proj.transform([-47.93,-15.78],"EPSG:4326","EPSG:4326"),zoom:4}),this.map=new s.Map({layers:[new s.layer.Tile({source:new s.source.OSM({url:"https://mt{0-3}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",attributions:[new s.Attribution({html:"© Google"}),new s.Attribution({html:'<a href="https://developers.google.com/maps/terms">Terms of Use.</a>'})]})}),this.vector],target:"map",view:this.view}),this.map},e.prototype.unsetMunicipios=function(e,t){var o=JSON.parse(JSON.stringify(e)),i=o.objects[t.estado].geometries;if(!t.municipiosRegiao)return!1;var r=i.filter(function(e,o,i){if(t.municipiosRegiao.indexOf(e.properties.cod)>-1)return i[o]});return o.objects[t.estado].geometries=r,o},e=u([o.i(n.c)(),d("design:paramtypes",["function"==typeof(t=void 0!==r.b&&r.b)&&t||Object,"function"==typeof(a=void 0!==i.a&&i.a)&&a||Object])],e);var t,a}()},230:function(e,t){function o(e){throw new Error("Cannot find module '"+e+"'.")}o.keys=function(){return[]},o.resolve=o,e.exports=o,o.id=230},231:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(246),r=o(3),n=o(251),a=o(249);n.a.production&&o.i(r.a)(),o.i(i.a)().bootstrapModule(a.a)},248:function(e,t,o){"use strict";var i=o(152),r=o(151),n=o(153),a=o(70),c=o(3);o.d(t,"a",function(){return d});var s=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,o,i){this.dataService=e,this.mapService=t,this.geolocationService=o,this.gmapsService=i,this.selectedEstado=0,this.selectedRegiaoIntermediaria=0,this.selectedRegiaoImediata=0}return e.prototype.ngOnInit=function(){this.listEstados=this.dataService.listEstados(),this.map=this.mapService.createMap()},e.prototype.onSelectEstado=function(){var e=this;this.location=this.dataService.getCapitalLatLng(this.selectedEstado,this.listEstados),this.listRegioesIntermediarias=this.dataService.listRegioesIntermediarias(this.selectedEstado),this.selectedRegiaoIntermediaria=0,this.selectedRegiaoImediata=0,this.dataService.listMunicipios().subscribe(function(t){e.municipiosEstado=t.filter(function(t){return t.estado===e.selectedEstado}).map(function(e){return parseInt(e.codigo)}),e.refreshMap()})},e.prototype.onSelectRegiaoIntermediaria=function(){var e=this;this.listRegioesImediatas=this.dataService.listRegioesImediatas(this.selectedRegiaoIntermediaria),this.selectedRegiaoImediata=0,this.dataService.listMunicipios().subscribe(function(t){e.municipiosRegiao=t.filter(function(t){return 0!==e.selectedRegiaoIntermediaria&&parseInt(t.regiao_intermediaria,0)===e.selectedRegiaoIntermediaria}).map(function(e){return parseInt(e.codigo,0)}),e.refreshMap()})},e.prototype.onSelectRegiaoImediata=function(){var e=this;this.dataService.listMunicipios().subscribe(function(t){e.municipiosRegiao=t.filter(function(t){return 0!==e.selectedRegiaoImediata&&parseInt(t.regiao_imediata,0)===e.selectedRegiaoImediata}).map(function(e){return parseInt(e.codigo,0)}),e.refreshMap()})},e.prototype.refreshMap=function(){var e={latLng:this.location,estado:this.selectedEstado,regiaoIntermediaria:this.selectedRegiaoIntermediaria,regiaoImediata:this.selectedRegiaoImediata,municipiosEstado:this.municipiosEstado,municipiosRegiao:this.municipiosRegiao};this.mapService.refreshMap(e)},e=s([o.i(c.l)({selector:"app-root",template:o(406),styles:[o(405)]}),u("design:paramtypes",["function"==typeof(t=void 0!==a.a&&a.a)&&t||Object,"function"==typeof(d=void 0!==n.a&&n.a)&&d||Object,"function"==typeof(f=void 0!==r.a&&r.a)&&f||Object,"function"==typeof(l=void 0!==i.a&&i.a)&&l||Object])],e);var t,d,f,l}()},249:function(e,t,o){"use strict";var i=o(152),r=o(151),n=o(153),a=o(70),c=o(41),s=o(3),u=o(150),d=o(69),f=o(145),l=o(248),p=o(250),m=o(245),g=o(247);o.d(t,"a",function(){return v});var h=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},v=function(){function e(){}return e=h([o.i(s.b)({declarations:[l.a,p.a],imports:[c.a,u.a,d.a,f.a.forRoot({apiKey:"AIzaSyCg9qbQOcGXasYsFBJUUerf7l5a5ZtB9WQ"}),m.a,m.b,m.c,g.a],providers:[a.a,n.a,r.a,i.a],bootstrap:[l.a]})],e)}()},250:function(e,t,o){"use strict";var i=o(3);o.d(t,"a",function(){return n});var r=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},n=function(){function e(){}return e.prototype.transform=function(e,t){var o=function(e){return function(t,o){return void 0===t[e]?1:void 0===o[e]?0:t[e]===o[e]?0:t[e]<o[e]?-1:1}};return e.sort(o(t)),e},e=r([o.i(i._3)({name:"sortBy",pure:!1})],e)}()},251:function(e,t,o){"use strict";o.d(t,"a",function(){return i});var i={production:!0}},405:function(e,t){e.exports=".map{height:500px;width:100%}"},406:function(e,t){e.exports='<md-toolbar color="primary">\n\n  <md-select placeholder="Estado" [(ngModel)]="selectedEstado" (change)="onSelectEstado()">\n    <md-option *ngFor="let estado of (listEstados | sortBy: \'nome\')" [value]="estado.codigo">{{ estado.nome }}</md-option>\n  </md-select>\n\n  <md-select placeholder="Região Intermediária" [(ngModel)]="selectedRegiaoIntermediaria" *ngIf="selectedEstado != 0" (change)="onSelectRegiaoIntermediaria()">\n    <md-option *ngFor="let rgint of (listRegioesIntermediarias | sortBy: \'nome\')" [value]="rgint.codigo">{{ rgint.nome }}</md-option>\n  </md-select>\n\n  <md-select placeholder="Região Imediata" [(ngModel)]="selectedRegiaoImediata" *ngIf="selectedRegiaoIntermediaria != 0" (change)="onSelectRegiaoImediata()">\n    <md-option *ngFor="let rgi of (listRegioesImediatas | sortBy: \'nome\')" [value]="rgi.codigo">{{ rgi.nome }}</md-option>\n  </md-select>\n\n</md-toolbar>\n\n<md-card>\n  <md-card-title id="title" class="title"></md-card-title>\n  <md-card-content id="map" class="map"></md-card-content>\n</md-card>\n\n'},670:function(e,t,o){e.exports=o(231)},70:function(e,t,o){"use strict";var i=o(69),r=o(3),n=o(125),a=(o.n(n),o(124));o.n(a);o.d(t,"a",function(){return u});var c=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.http=e}return e.prototype.getEstado=function(e){return this.http.get("../assets/data/coordenadas/"+e+".json").map(function(e){return e.json()})},e.prototype.listEstados=function(){var e=[];return this.http.get("../assets/data/estados.json").map(function(e){return e.json()}).subscribe(function(t){t.map(function(t){e.push({codigo:t.codigo,nome:t.nome,uf:t.uf,latLng:t.capital.latLng.reverse()})})}),e},e.prototype.listRegioesIntermediarias=function(e){var t=[];return this.http.get("../assets/data/regioes.intermediarias.json").map(function(e){return e.json()}).subscribe(function(o){o[e].map(function(e){t.push({codigo:e.codigo,nome:e.nome})})}),t},e.prototype.listRegioesImediatas=function(e){var t=[];return this.http.get("../assets/data/regioes.imediatas.json").map(function(e){return e.json()}).subscribe(function(o){o[e].map(function(e){t.push({codigo:e.codigo,nome:e.nome})})}),t},e.prototype.getCodigoByUF=function(e,t){return t.filter(function(t){return t.uf.includes(e)}).map(function(e){return e.codigo})[0]},e.prototype.getCapitalLatLng=function(e,t){return t.filter(function(t){return t.codigo.includes(e)}).map(function(e){return e.latLng})[0]},e.prototype.listMunicipios=function(){return this.http.get("../assets/data/municipios.json").map(function(e){return e.json()})},e=c([o.i(r.c)(),s("design:paramtypes",["function"==typeof(t=void 0!==i.b&&i.b)&&t||Object])],e);var t}()}},[670]);